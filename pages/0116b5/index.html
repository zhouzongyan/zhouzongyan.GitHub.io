<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>20 React基础知识 | Allen</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="rust">
    <meta name="keywords" content="allen,,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.145d8473.css" as="style"><link rel="preload" href="/assets/js/app.6f8ed848.js" as="script"><link rel="preload" href="/assets/js/2.83be7545.js" as="script"><link rel="preload" href="/assets/js/27.d221eed5.js" as="script"><link rel="prefetch" href="/assets/js/10.5a3204f9.js"><link rel="prefetch" href="/assets/js/11.02768c01.js"><link rel="prefetch" href="/assets/js/12.2c0a6e69.js"><link rel="prefetch" href="/assets/js/13.aab6b678.js"><link rel="prefetch" href="/assets/js/14.099be2b5.js"><link rel="prefetch" href="/assets/js/15.a608c94d.js"><link rel="prefetch" href="/assets/js/16.e2819852.js"><link rel="prefetch" href="/assets/js/17.86af6682.js"><link rel="prefetch" href="/assets/js/18.c8537385.js"><link rel="prefetch" href="/assets/js/19.eab216d3.js"><link rel="prefetch" href="/assets/js/20.682aa922.js"><link rel="prefetch" href="/assets/js/21.219bb420.js"><link rel="prefetch" href="/assets/js/22.84ecdbb0.js"><link rel="prefetch" href="/assets/js/23.b55b7082.js"><link rel="prefetch" href="/assets/js/24.0828344e.js"><link rel="prefetch" href="/assets/js/25.c20d5ec5.js"><link rel="prefetch" href="/assets/js/26.06149e04.js"><link rel="prefetch" href="/assets/js/28.53082f18.js"><link rel="prefetch" href="/assets/js/29.eedb3a2c.js"><link rel="prefetch" href="/assets/js/3.136b0782.js"><link rel="prefetch" href="/assets/js/30.43e5e245.js"><link rel="prefetch" href="/assets/js/4.2e56199c.js"><link rel="prefetch" href="/assets/js/5.2ab3c7f2.js"><link rel="prefetch" href="/assets/js/6.fa34b130.js"><link rel="prefetch" href="/assets/js/7.9dab484c.js"><link rel="prefetch" href="/assets/js/8.d763ac36.js"><link rel="prefetch" href="/assets/js/9.845b950f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.145d8473.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="Allen" class="logo"> <span class="site-name can-hide">Allen</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/9088dd/" class="nav-link">rust</a></div><div class="nav-item"><a href="/pages/b63bcd/" class="nav-link">go</a></div><div class="nav-item"><a href="/pages/dfd26d/" class="nav-link">react</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/pages/9088dd/" class="nav-link">rust</a></div><div class="nav-item"><a href="/pages/b63bcd/" class="nav-link">go</a></div><div class="nav-item"><a href="/pages/dfd26d/" class="nav-link">react</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pages/dfd26d/" class="sidebar-link">01 React Hook 简介</a></li><li><a href="/pages/b364c0/" class="sidebar-link">02 useState基础用法</a></li><li><a href="/pages/0e215c/" class="sidebar-link">03 useState高级用法</a></li><li><a href="/pages/16dc88/" class="sidebar-link">04 useEffect基础用法</a></li><li><a href="/pages/b9c039/" class="sidebar-link">05 useEffect高级用法</a></li><li><a href="/pages/fd14d7/" class="sidebar-link">06 useContext基础用法</a></li><li><a href="/pages/15da39/" class="sidebar-link">07 useContext高级用法</a></li><li><a href="/pages/ab6774/" class="sidebar-link">08 useReducer基础用法</a></li><li><a href="/pages/fd7fdb/" class="sidebar-link">09 useReducer高级用法</a></li><li><a href="/pages/9d19f1/" class="sidebar-link">10 useCallback基础用法</a></li><li><a href="/pages/8b008f/" class="sidebar-link">11 useMemo基础用法</a></li><li><a href="/pages/4c9695/" class="sidebar-link">12 useRef基础用法</a></li><li><a href="/pages/ede426/" class="sidebar-link">13 useImperativeHandle基础用法</a></li><li><a href="/pages/1b392f/" class="sidebar-link">14 useLayoutEffect基础用法</a></li><li><a href="/pages/e1ebef/" class="sidebar-link">15 useDebugValue基础用法</a></li><li><a href="/pages/c38877/" class="sidebar-link">16 自定义hook</a></li><li><a href="/pages/621c1c/" class="sidebar-link">17 React Hook 总结</a></li><li><a href="/pages/a44117/" class="sidebar-link">18 示例：React使用Echarts所用到的hooks</a></li><li><a href="/pages/74a184/" class="sidebar-link">19 useTransition基础用法</a></li><li><a href="/pages/0116b5/" aria-current="page" class="active sidebar-link">20 React基础知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#安装react并初始化" class="sidebar-link">安装react并初始化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#_1、安装-npm-install-g-create-react-app" class="sidebar-link">1、安装：npm install -g create-react-app</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#_2、创建hello-react目录并初始化-npx-create-react-app-hello-react" class="sidebar-link">2、创建hello-react目录并初始化：npx create-react-app hello-react</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#_3、启动项目-cd-hello-react、npm-start" class="sidebar-link">3、启动项目：cd hello-react、npm start</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#自定义组件基础知识" class="sidebar-link">自定义组件基础知识</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#纯函数-概念解释" class="sidebar-link">&quot;纯函数&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#受控组件-概念解释" class="sidebar-link">&quot;受控组件&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#声明式开发-概念解释" class="sidebar-link">&quot;声明式开发&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#单项数据流-概念解释" class="sidebar-link">&quot;单项数据流&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#视图层渲染框架-概念解释" class="sidebar-link">&quot;视图层渲染框架&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#函数式编程-概念解释" class="sidebar-link">&quot;函数式编程&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#虚拟dom-概念解释" class="sidebar-link">&quot;虚拟DOM&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#diff算法-概念解释" class="sidebar-link">&quot;Diff算法&quot; 概念解释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#同层-同级-虚拟dom比对" class="sidebar-link">同层(同级)虚拟DOM比对</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#列表元素使用key值进行比对" class="sidebar-link">列表元素使用key值进行比对</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#高阶组件-概念解释" class="sidebar-link">&quot;高阶组件&quot; 概念解释</a></li><li class="sidebar-sub-header level2"><a href="/pages/0116b5/#生命周期函数-概念解释" class="sidebar-link">&quot;生命周期函数&quot; 概念解释</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/0116b5/#生命周期4个阶段和该阶段内的生命周期函数" class="sidebar-link">生命周期4个阶段和该阶段内的生命周期函数：</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#初始化-initialization" class="sidebar-link">初始化(Initialization)</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#挂载-mounting" class="sidebar-link">挂载(Mounting)</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#更新-updation" class="sidebar-link">更新(Updation)：</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#捕获子组件错误" class="sidebar-link">捕获子组件错误：</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#卸载-unmounting" class="sidebar-link">卸载(Unmounting)：</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#生命周期函数的几个应用场景" class="sidebar-link">生命周期函数的几个应用场景：</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#第一种-引用外部css样式" class="sidebar-link">第一种：引用外部css样式</a></li><li class="sidebar-sub-header level5"><a href="/pages/0116b5/#第二种-内部样式" class="sidebar-link">第二种：内部样式</a></li></ul></li></ul></li><li><a href="/pages/89216e/" class="sidebar-link">21 React扩展阅读</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>react</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="//github.183.co" target="_blank" title="作者" class="beLink" data-v-06225672>Allen</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-09-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">20 React基础知识<!----></h1> <div class="page-slot page-slot-top">
    <div class="wwads-cn wwads-horizontal page-wwads" data-id="136"></div>
    <style>
      .page-wwads{
        width:100%!important;
        min-height: 0;
        margin: 0;
      }
      .page-wwads .wwads-img img{
        width:80px!important;
      }
      .page-wwads .wwads-poweredby{
        width: 40px;
        position: absolute;
        right: 25px;
        bottom: 3px;
      }
      .wwads-content .wwads-text, .page-wwads .wwads-text{
        height: 100%;
        padding-top: 5px;
        display: block;
      }
  </style>
  </div> <div class="theme-vdoing-content content__default"><h1 id="react基础知识"><a href="#react基础知识" class="header-anchor">#</a> React基础知识</h1> <p>说明：以下这些基础知识适用于类组件和函数组件，并不是函数组件独有的。</p> <h2 id="安装react并初始化"><a href="#安装react并初始化" class="header-anchor">#</a> 安装react并初始化</h2> <h5 id="_1、安装-npm-install-g-create-react-app"><a href="#_1、安装-npm-install-g-create-react-app" class="header-anchor">#</a> 1、安装：npm install -g create-react-app</h5> <h5 id="_2、创建hello-react目录并初始化-npx-create-react-app-hello-react"><a href="#_2、创建hello-react目录并初始化-npx-create-react-app-hello-react" class="header-anchor">#</a> 2、创建hello-react目录并初始化：npx create-react-app hello-react</h5> <p>注意：</p> <ol><li>目录名不允许有大写字母</li> <li>初始化过程比较慢，甚至可能需要5-10分钟</li> <li>如果报错：npm ERR! Unexpected end of JSON input while parsing near '...n\r\nwsFcBAEBCAAQBQJd'， 解决方法：npm root -g 找到本机npm全局安装目录，cd 进入该目录，执行清除缓存：npm cache clean --force，然后再次初始化。</li></ol> <h5 id="_3、启动项目-cd-hello-react、npm-start"><a href="#_3、启动项目-cd-hello-react、npm-start" class="header-anchor">#</a> 3、启动项目：cd hello-react、npm start</h5> <p>默认将启动：http://localhost:3000</p> <h2 id="自定义组件基础知识"><a href="#自定义组件基础知识" class="header-anchor">#</a> 自定义组件基础知识</h2> <p>1、自定义组件必须以大写字母开头、默认网页原生标签还以小写开头。请注意这里表述的&quot;默认网页原生标签&quot;本质上并不是真实的原生网页标签，他们是react默认定义好的、内置的自定义组件标签，只不过这些标签刚好和原生标签的作用，功能，名称一模一样而已。</p> <p>2、自定义组件如果不希望设定最外层的标签，那么可以使用react(16+版本)提供的占位符Fragment来充当最外层标签；</p> <div class="language- extra-class"><pre><code>import React,{Component,Fragment} from 'react';  
类组件：render(){return &lt;Fragment&gt;xxxxxxx&lt;/Fragment&gt;}  
函数组件：return &lt;Fragment&gt;xxxxxxx&lt;/Fragment&gt;
</code></pre></div><p>在最新的react版本中，也可以直接使用&lt;&gt;&lt;/&gt;来代替Fragment。其中&lt;&gt;唯一可以拥有的属性为key。即&lt; key='xxx'&gt;&lt;/&gt;</p> <p>3、使用数组map循环更新li，一定要给li添加对应的key值，否则虽然正常运行，但是会报错误警告。不建议直接使用index作为key值。</p> <p>4、在最新的react版本中，为了提高更新性能，推荐采用异步的方式更新数据。具体使用方式为：setXxx((prevData) =&gt; {return xxx})。其中参数prevData指之前的变量值，return的对象指修改之后的数据值。</p> <p>可以将上面代码简写为：setXxx(prevData =&gt; xxx)
若没有用到prevData参数，还可以省略，即 setXxx(() =&gt; xxx);</p> <p>异步的目的是为了优化更新性能，react短期内发现多条数据变量发生修改，那么他会将所有修改合并成一次修改再最终执行。</p> <p>5、在JSX中写注释，格式为：{/* xxxxx */}或{//xxxx}，注意如果使用单行注释，最外的大括号必须单独占一行。注释尽在开发源代码中显示，在导出的网页中不会有该注释。</p> <p>6、给标签添加样式时，推荐使用className，不推荐使用class。如果使用class虽然运行没问题，但是会报错误警告，因为样式class这个关键词和js中声明类的class冲突。类似的还有标签中for关键词，推荐改为htmlFor。</p> <p>7、通常情况下，react是针对组件开发，并且只负责对html中某一个div进行渲染，那么意味着该html其他标签不受影响，这样引申出来一个结果：一个html既可以使用react，也可以使用vue，两者可以并存。</p> <p>8、为了方便调试代码，可以在谷歌浏览器中安装React Developer Tools插件。安装后可在谷歌浏览器调试模式下，查看component标签下的内容。  若访问本机react调试网页则该插件图标为红色、若访问导出版本的React网页则该插线显示为蓝色、若访问的网页没使用react框架则为灰色。</p> <p>9、给组件设定属性，只有属性名没有属性值，那么默认react会将该属性值设置为true。在ES6中如果只有一个属性对象没有属性值，通常理解为该属性名和属性值是相同的。 为了避免混淆，不建议不给属性不设置属性值。</p> <p>10、ReactDOM.createPortal()用来将元素渲染到任意DOM元素中(包括顶级组件之外的其他DOM中)。</p> <h2 id="纯函数-概念解释"><a href="#纯函数-概念解释" class="header-anchor">#</a> &quot;纯函数&quot; 概念解释</h2> <p>JS中定义的所有函数都可以增加参数，所谓&quot;纯函数&quot;是指函数内部并未修改过该参数的函数。</p> <p>例如以下函数：function myFun(a){let c=a }，该函数内部从未更改过参数a，那么这个函数就是纯函数。</p> <p>反例，非纯函数 例如：function myFun(a){a=a+2; let c=a}，该函数内部修改过参数a，那么这个函数就不再是纯函数了。</p> <p>纯函数的特殊意义是什么？<br>
因为纯函数内部从不会直接修改参数，那么无论运行多少次，执行结果永远是一致的。</p> <p>若仅仅有一个函数，那么也无所谓，但是如果有多个函数都是都需要调用执行同一个变量(参数)，为了确保多个函数执行结果是符合预期的，那么就要求每个函数都不能在自己内部修改该变量(参数)。</p> <p>这就是为什么react不允许直接修改某变量的原因。</p> <h2 id="受控组件-概念解释"><a href="#受控组件-概念解释" class="header-anchor">#</a> &quot;受控组件&quot; 概念解释</h2> <p>像input、select、textarea、form等将自身value与某变量进行绑定的组件，称之为受控组件。</p> <p>&quot;受控&quot;即这些组件的可以值受到某变量的控制。</p> <p>与之对应的是&quot;非受控组件&quot;，即该组件对应的值并不能被某变量控制。</p> <p>例如&quot;&lt;input type='file'/&gt;&quot;，该组件的值为用户选中本地的文件信息，该值并不能直接通过某变量来进行value值的设定，因此该组件属于&quot;非受控组件&quot;。</p> <h2 id="声明式开发-概念解释"><a href="#声明式开发-概念解释" class="header-anchor">#</a> &quot;声明式开发&quot; 概念解释</h2> <p>&quot;声明式开发&quot;：基于数据定义和数据改变，视图层自动更新。<br>
&quot;命令式开发&quot;：基于具体执行命令更改视图，例如DOM操作修改。</p> <p>注意：声明式开发并不是不进行DOM操作，而是把DOM操作频率降到最低。</p> <h2 id="单项数据流-概念解释"><a href="#单项数据流-概念解释" class="header-anchor">#</a> &quot;单项数据流&quot; 概念解释</h2> <p>react框架的原则中规定，子组件只可以使用父组件传递过来的xxx属性对应的值或方法，不可以改变。</p> <p>数据只能单向发生传递(父传向子，不允许子直接修改父)，若子组件想修改父组件中的数据，只能通过父组件暴露给子组件的函数(方法)来间接修改。</p> <p>react框架具体实现方式是设置父组件传递给子组件的&quot;数据值或方法&quot;仅仅为可读，但不可修改。</p> <p>为什么要做这样的限制？<br>
因为一个父组件可以有多个子组件，如果每个子组件都可修改父组件中的数据(子组件之间彼此共用父组件的数据)，一个子组件的数据修改会造成其他子组件数据更改，最终会让整个组件数据变得非常复杂。</p> <p>为了简化数据操作复杂程度，因此采用单向数据流策略，保证父组件数据的唯一最终可修改权归父组件所有。</p> <h2 id="视图层渲染框架-概念解释"><a href="#视图层渲染框架-概念解释" class="header-anchor">#</a> &quot;视图层渲染框架&quot; 概念解释</h2> <p>react框架自身定位是&quot;视图层渲染框架&quot;，单向数据流概念很好，但是实际项目中页面会很复杂。</p> <p>例如顶级组件Root中分别使用了组件A(由子组件A0、A1、A2构成)、组件B(由子组件A0、A1、A2构成)、组件C(由子组件C0、C1、C2构成)，若此时组件A的子组件A2想和组件C的子组件C1进行数据交互，那么按照单向数据流的规范，数据操作流程为 A2 -&gt; A -&gt; Root -&gt; C - C1，可以看出操作流程非常复杂。</p> <p>所以实际开发中，React框架也许会结合其他&quot;数据层框架&quot;(例如Redux、Flux等)，但是请注意，只从有了hook以后，可以通过useReducer+useContext来实现类似Redux的功能。</p> <h2 id="函数式编程-概念解释"><a href="#函数式编程-概念解释" class="header-anchor">#</a> &quot;函数式编程&quot; 概念解释</h2> <p>react自定义组件的各种交互都在内部定义不同的函数(js语法规定：类class中定义的函数不需要在前面写 function关键词)，因此成为函数式编程。不像原生JS和html交互那样，更多侧重html标签、DOM操作来实现视图和交互。</p> <p>函数式编程的几点好处：<br>
1、可以把复杂功能的处理函数拆分成多个细小的函数。<br>
2、由于都是通过函数来进行视图层渲染和数据交互，更加方便编写&quot;前端自动化测试&quot;代码。</p> <h2 id="虚拟dom-概念解释"><a href="#虚拟dom-概念解释" class="header-anchor">#</a> &quot;虚拟DOM&quot; 概念解释</h2> <p>虚拟DOM(Virtual Dom)就是一个JS对象(数组对象)，用来描述真实DOM。相对通过html标签创建的真实DOM，虚拟DOM是保存在客户端内存里的一份JS表述DOM的数组对象。</p> <p>用最简单的一个div标签来示意两者的差异，数据格式如下：</p> <div class="language- extra-class"><pre><code>//真实DOM数据格式(网页标签)
&lt;div id='mydiv'&gt;hell react&lt;/div&gt;

//虚拟DOM数据格式(JS数组对象)
//虚拟DOM数组对象格式为：标签名+属性集合+值
['div',{id:'mydiv'},'hell react']

//在JSX的创建模板代码中，通常代码格式为
render(){return &lt;div id='mydiv'&gt;hello react&lt;/&gt;}

//还可以使用react提供的，更加底层的方法来实现
render(){return React.createElement('div',{id:'mydiv'},'hello react')}
</code></pre></div><p>虚拟DOM更新性能快的原因并不是因为在内存中(理论上任何软件都是运行在内存中)，而是因为虚拟DOM储存的数据格式为JS对象，用JS来操作(生成/查询/对比/更新)JS对象很容易。用JS操作(生成/查询/对比/更新)真实DOM则需要调用Web Action层的API，性能相对就慢。</p> <p>react运行(更新)步骤，大致为：<br>
1、定义组件数据变量<br>
2、定义组件模板JSX<br>
3、数据与模板结合，生成一份虚拟DOM<br>
4、将虚拟DOM转化为真实DOM<br>
5、将得到的真实DOM挂载到html中(通过真实DOM操作)，用来显示<br>
6、监听变量发生改变，若有改变重新执行第3步(数据与模板结合，生成另外一份新的虚拟DOM)<br>
7、在内存中对比前后两份虚拟DOM，找出差异部分(diff算法)<br>
8、将差异部分转化为真实的DOM<br>
8、将差异化的真实DOM，通过真实DOM操作进行更新</p> <p>当变量发生更改时，虚拟DOM减少了真实DOM的创建和对比次数(通过虚拟DOM而非真实DOM)，从而提高了性能。</p> <h2 id="diff算法-概念解释"><a href="#diff算法-概念解释" class="header-anchor">#</a> &quot;Diff算法&quot; 概念解释</h2> <p>当变量发生改变时，需要重新生成新的虚拟DOM，并且对旧的虚拟DOM进行差异化比对。<br>
Diff算法就是这个差异化比对的算法。</p> <p>Diff算法为了提高性能，优化算法，通常原则为：</p> <h5 id="同层-同级-虚拟dom比对"><a href="#同层-同级-虚拟dom比对" class="header-anchor">#</a> 同层(同级)虚拟DOM比对</h5> <p>先从两个虚拟DOM(JS对象)同层(即顶层)开始比对，如果发现同层就不一致，那么就直接放弃下一层(级别)的对比，采用最新的虚拟DOM。</p> <p>疑问点：假如两心虚拟DOM顶层不一致，但下一级别以及后面的更多级别都一致，如果仅仅因为顶层不一致而就该放弃下一级别，重新操作真实DOM从头渲染，岂不是性能浪费？</p> <p>答：同层(同级)虚拟DOM比对，&quot;比对&quot;算法相对简单，比对速度快。如果采用多层(多级)比对，&quot;比对&quot;算法会相对复杂，比对速度慢。 同层虚拟DOM比对就是利用了比对速度快的优势来抵消&quot;操作真实DOM操作性能上的浪费&quot;。</p> <h5 id="列表元素使用key值进行比对"><a href="#列表元素使用key值进行比对" class="header-anchor">#</a> 列表元素使用key值进行比对</h5> <p>这里的key值是值&quot;稳定的key值(是有规律的字符串，非数字)&quot;，若key值为索引数字index，那么顺序发生改变时，索引数字也会发生变化，无法判断之前的和现在的是否是同一个对象。</p> <p>如果key值是稳定的，那么在比对的时候，比较容易比对出是否发生变化，以及具体的变化是什么。</p> <p>Diff算法还有非常多的其他性能优化算法，以上列出的&quot;同层比对、key值比对&quot;仅仅为算法举例。</p> <h2 id="高阶组件-概念解释"><a href="#高阶组件-概念解释" class="header-anchor">#</a> &quot;高阶组件&quot; 概念解释</h2> <p>高阶组件是一种组件设计方式(设计模式)，就是将一个组件作为参数传递给一个函数，该函数接收参数(组件)后进行处理和装饰，并返回出一个新的组件。</p> <p>简单来说就是，普通组件是根据参数(props)生成一个UI(JSX语法支持的标签)。而高阶组件是根据参数(组件)生成一个新的组件。</p> <h2 id="生命周期函数-概念解释"><a href="#生命周期函数-概念解释" class="header-anchor">#</a> &quot;生命周期函数&quot; 概念解释</h2> <p>生命周期函数指在某一时刻组件会自动调用执行的函数。</p> <p>这里的&quot;某一时刻&quot;可以是指组件初始化、挂载到虚拟DOM、数据更改引发的更新(重新渲染)、从虚拟DOM卸载这4个阶段。</p> <h4 id="生命周期4个阶段和该阶段内的生命周期函数"><a href="#生命周期4个阶段和该阶段内的生命周期函数" class="header-anchor">#</a> 生命周期4个阶段和该阶段内的生命周期函数：</h4> <h5 id="初始化-initialization"><a href="#初始化-initialization" class="header-anchor">#</a> 初始化(Initialization)</h5> <p>constructor()是JS中原生类的构造函数，理论上他不专属于组件的初始化，但是如果把它归类成组件组初始化也是可以接受的。</p> <h5 id="挂载-mounting"><a href="#挂载-mounting" class="header-anchor">#</a> 挂载(Mounting)</h5> <p>componentWillMount(即将被挂载)、render(挂载)、componentDidMount(挂载完成)</p> <h5 id="更新-updation"><a href="#更新-updation" class="header-anchor">#</a> 更新(Updation)：</h5> <p>props发生变化后对应的更新过程：componentWillReceiveProps(父组件发生数据更改，父组件的render重新被执行，子组件预测到可能会发生替换新数据)、shouldComponentUpdate(询问是否应该更新？返回true则更新、返回flash则不更新)、componentWillUpate(准备要开始更新)、render(更新)、componentDidUpdate(更新完成)</p> <p>变量数据发生变化后对应的更新过程：shouldComponentUpdate(询问是否应该更新？返回true则更新、返回flash则不更新)、conponentWillUpdate(准备要开始更新)、、render(更新)、componentDidUpdate(更新完成)</p> <p>props和states发生变化后的更新过程，唯一差异是props多了一个 componentWillReceiveProps生命周期函数。</p> <p>componentWillReceiveProps触发的条件是：<br>
1、一个组件要从父组件接收参数，并且已存在父组件中(子组件第一次被创建时是不会执行componentWillReceiveProps的)<br>
2、只要父组件的render函数重新被执行(父组件发生数据更改，子组件预测到可能会发生替换新数据)，componentWillReceiveProps就会被触发</p> <h5 id="捕获子组件错误"><a href="#捕获子组件错误" class="header-anchor">#</a> 捕获子组件错误：</h5> <p>componentDidCatch(捕获到子组件错误时被触发)</p> <h5 id="卸载-unmounting"><a href="#卸载-unmounting" class="header-anchor">#</a> 卸载(Unmounting)：</h5> <p>componentWillUnmount(即将被卸载)</p> <p>备注：类组件继承自Component组件，Component组件内置了除render()以外的所有生命周期函数。因此自定义组件render()这个生命周期函数必须存在，其他的生命周期函数都可以忽略不写。 而使用了hook的函数组件，简化了生命周期函数调用的复杂程度。</p> <h5 id="生命周期函数的几个应用场景"><a href="#生命周期函数的几个应用场景" class="header-anchor">#</a> 生命周期函数的几个应用场景：</h5> <p>对于类组件(由class创建的)和函数组件(由function创建的)，他们对于生命周期的调用方法不同。</p> <p>1、只需要第一次获取数据的Ajax请求<br>
如果类组件有ajax请求(只需请求一次)，那么最好把ajax请求写在componentDidMount中(只执行一次)。因为&quot;初始化、挂载、卸载&quot;在一个组件的整个生命周期中只会发生一次，而&quot;更新&quot;可以在生命周期中多次执行。<br>
如果是函数组件，则可以写在useEffect()中，并且将第2个参数设置为空数组，这样useEffect只会执行一次。</p> <p>2、防止子组件不必要的重新渲染<br>
如果是类组件，父组件发生变量改变，那么会调用render()，会重新渲染所有子组件。但是如果变量改变的某个值与某子组件并不相关，如果此时也重新渲染该子组件会造成性能上的浪费。为了解决这个情况，可以在子组件中的shouldComponentUpdate生命周期函数中，做以下操作:</p> <div class="language- extra-class"><pre><code>shouldComponentUpdate(nextProps,nextStates){
  //判断xxx值是否相同，如果相同则不进行重新渲染
  return (nextProps.xxx !== this.props.xxx); //注意是 !== 而不是 !=
}
</code></pre></div><p>还可以让组件继承由React.Component改为React.PureComponent，react会自动帮我们在shouldComponentUpdate生命周期函数中做浅对比。</p> <p>如果是函数组件，则在子组件导出时，使用React.memo()进行包裹，同时结合useCallback来阻止无谓的渲染，实现提高性能。</p> <h1 id="react中设置样式的几种形式"><a href="#react中设置样式的几种形式" class="header-anchor">#</a> React中设置样式的几种形式</h1> <h5 id="第一种-引用外部css样式"><a href="#第一种-引用外部css样式" class="header-anchor">#</a> 第一种：引用外部css样式</h5> <p>伪代码示例：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token keyword">from</span> <span class="token string">'./xxx.css'</span><span class="token punctuation">;</span>  
<span class="token keyword">return</span> <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'xxx'</span> <span class="token operator">/</span>\<span class="token operator">&gt;</span>
</code></pre></div><p>注意：在jsx语法中，使用驼峰命名。例如原生html中的classname需要改成className、background-color要改成backgroundColor。</p> <h5 id="第二种-内部样式"><a href="#第二种-内部样式" class="header-anchor">#</a> 第二种：内部样式</h5> <p>伪代码示例：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>backgroundColor<span class="token operator">:</span><span class="token string">'green'</span><span class="token punctuation">,</span>width<span class="token operator">:</span><span class="token string">'100px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span>\<span class="token operator">&gt;</span>  
</code></pre></div><p>注意：内联样式值为一个对象，对象属性之间用&quot;,&quot;分割而不是原生html中的&quot;;&quot;。<br>
因为是一个对象，因此下面代码也是可行的：<br>
const mystyle = {backgroundColor:'green',width:'100px'};
return &lt;div style={mystyle} /&gt;</p> <h1 id="hook用法"><a href="#hook用法" class="header-anchor">#</a> Hook用法</h1> <p>Hook是react16.8以上版本才出现的新特性，可以在函数组件中使用组件生命周期函数，且颗粒度更加细致。</p> <p>可以把Hook逻辑从组件中抽离出来，多个组件可以共享该hook逻辑。</p> <p><strong>请注意hook本质上是为了解决组件之间共享逻辑，并不是单纯为了解决组件之间共享数据。</strong></p> <p>hook表现出来特别像一个普通的JS函数(仅仅是表现出来但绝不是真的普通JS函数)。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023-09-19, 09:20:46</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/74a184/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">19 useTransition基础用法</div></a> <a href="/pages/89216e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">21 React扩展阅读</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/74a184/" class="prev">19 useTransition基础用法</a></span> <span class="next"><a href="/pages/89216e/">21 React扩展阅读</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:allen@183.co" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="//github.183.co" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://i.y.qq.com/n2/m/share/details/taoge.html?id=8424326180&amp;hosteuin=" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>Allen | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6f8ed848.js" defer></script><script src="/assets/js/2.83be7545.js" defer></script><script src="/assets/js/27.d221eed5.js" defer></script>
  </body>
</html>
