<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.123.7"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="20 React基础知识"><meta itemprop=description content="保持简单的易用性和强大的功能。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://chn.gg/images/logo.jpg"><meta itemprop=keywords content="React,Java,Go,SQL"><meta property="og:type" content="article"><meta property="og:title" content="20 React基础知识"><meta property="og:description" content="保持简单的易用性和强大的功能。"><meta property="og:image" content="/images/logo.jpg"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://chn.gg/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><meta property="og:site_name" content="热爱生活与梦想"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Allen"><meta property="article:published_time" content="2023-09-19 08:57:56 +0000 UTC"><meta property="article:modified_time" content="2023-09-19 08:57:56 +0000 UTC"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.e0a6351e3c656c8120896640032aab320a6a302dcfd03cde96028362edadbfa8.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86","permalink":"https://chn.gg/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","title":"20 React基础知识","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>20 React基础知识 - 热爱生活与梦想</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>热爱生活与梦想</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>没有伞的孩子要学会努力奔跑 ✊</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-go"><a href=/categories/go/ class=hvr-icon-pulse rel=section><i class="fa fa-go hvr-icon"></i>go</a></li><li class="menu-item menu-item-react"><a href=/categories/react/ class=hvr-icon-pulse rel=section><i class="fa fa-react hvr-icon"></i>React</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>33</span></a></li><li class="menu-item menu-item-rust"><a href=/categories/rust/ class=hvr-icon-pulse rel=section><i class="fa fa-rust hvr-icon"></i>Rust</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#安装react并初始化>安装react并初始化</a><ul><li><ul><li></li></ul></li></ul></li><li><a href=#自定义组件基础知识>自定义组件基础知识</a></li><li><a href=#纯函数-概念解释>&ldquo;纯函数&rdquo; 概念解释</a></li><li><a href=#受控组件-概念解释>&ldquo;受控组件&rdquo; 概念解释</a></li><li><a href=#声明式开发-概念解释>&ldquo;声明式开发&rdquo; 概念解释</a></li><li><a href=#单项数据流-概念解释>&ldquo;单项数据流&rdquo; 概念解释</a></li><li><a href=#视图层渲染框架-概念解释>&ldquo;视图层渲染框架&rdquo; 概念解释</a></li><li><a href=#函数式编程-概念解释>&ldquo;函数式编程&rdquo; 概念解释</a></li><li><a href=#虚拟dom-概念解释>&ldquo;虚拟DOM&rdquo; 概念解释</a></li><li><a href=#diff算法-概念解释>&ldquo;Diff算法&rdquo; 概念解释</a><ul><li><ul><li></li></ul></li></ul></li><li><a href=#高阶组件-概念解释>&ldquo;高阶组件&rdquo; 概念解释</a></li><li><a href=#生命周期函数-概念解释>&ldquo;生命周期函数&rdquo; 概念解释</a><ul><li><ul><li><a href=#生命周期4个阶段和该阶段内的生命周期函数>生命周期4个阶段和该阶段内的生命周期函数：</a></li></ul></li></ul></li></ul><ul><li><ul><li><ul><li></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Allen src=/imgs/img-lazy-loading.gif data-src=/images/logo.jpg><p class=site-author-name itemprop=name>Allen</p><div class=site-description itemprop=description>保持简单的易用性和强大的功能。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>33</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>6</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>9</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zhouzongyan title="Github → https://github.com/zhouzongyan" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://www.zhihu.com/people/iningmeng title="知乎 → https://www.zhihu.com/people/iningmeng" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://gitee.com/hugo-next/hugo-theme-next title=https://gitee.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=2023-05-15T20:29:27+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=73791></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=163></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2024-06-04T09:12:25+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/zhouzongyan rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://chn.gg/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/images/logo.jpg"><meta itemprop=name content="Allen"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Allen"><meta itemprop=description content="保持简单的易用性和强大的功能。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="20 React基础知识"><meta itemprop=description content="React基础知识 说明：以下这些基础知识适用于类组件和函数组件，并不是函数组件独有的。 安装react并初始化 1、安装：npm install -g create-react-app 2、创建h"></span><header class=post-header><h1 class=post-title itemprop="name headline">20 React基础知识</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2023-09-19 08:57:56 +0000 UTC" itemprop="dateCreated datePublished" datetime="2023-09-19 08:57:56 +0000 UTC">2023-09-19
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/react itemprop=url rel=index><span itemprop=name>react</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>6814</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>14分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><h1 id=react基础知识>React基础知识
<a class=header-anchor href=#react%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86></a></h1><p>说明：以下这些基础知识适用于类组件和函数组件，并不是函数组件独有的。</p><h2 id=安装react并初始化>安装react并初始化
<a class=header-anchor href=#%e5%ae%89%e8%a3%85react%e5%b9%b6%e5%88%9d%e5%a7%8b%e5%8c%96></a></h2><h5 id=1安装npm-install--g-create-react-app>1、安装：npm install -g create-react-app
<a class=header-anchor href=#1%e5%ae%89%e8%a3%85npm-install--g-create-react-app></a></h5><h5 id=2创建hello-react目录并初始化npx-create-react-app-hello-react>2、创建hello-react目录并初始化：npx create-react-app hello-react
<a class=header-anchor href=#2%e5%88%9b%e5%bb%bahello-react%e7%9b%ae%e5%bd%95%e5%b9%b6%e5%88%9d%e5%a7%8b%e5%8c%96npx-create-react-app-hello-react></a></h5><p>注意：</p><ol><li>目录名不允许有大写字母</li><li>初始化过程比较慢，甚至可能需要5-10分钟</li><li>如果报错：npm ERR! Unexpected end of JSON input while parsing near &lsquo;&mldr;n\r\nwsFcBAEBCAAQBQJd&rsquo;， 解决方法：npm root -g 找到本机npm全局安装目录，cd 进入该目录，执行清除缓存：npm cache clean &ndash;force，然后再次初始化。</li></ol><h5 id=3启动项目cd-hello-reactnpm-start>3、启动项目：cd hello-react、npm start
<a class=header-anchor href=#3%e5%90%af%e5%8a%a8%e9%a1%b9%e7%9b%aecd-hello-reactnpm-start></a></h5><p>默认将启动：http://localhost:3000</p><h2 id=自定义组件基础知识>自定义组件基础知识
<a class=header-anchor href=#%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bb%84%e4%bb%b6%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86></a></h2><p>1、自定义组件必须以大写字母开头、默认网页原生标签还以小写开头。请注意这里表述的"默认网页原生标签"本质上并不是真实的原生网页标签，他们是react默认定义好的、内置的自定义组件标签，只不过这些标签刚好和原生标签的作用，功能，名称一模一样而已。</p><p>2、自定义组件如果不希望设定最外层的标签，那么可以使用react(16+版本)提供的占位符Fragment来充当最外层标签；</p><pre><code>import React,{Component,Fragment} from 'react';  
类组件：render(){return &lt;Fragment&gt;xxxxxxx&lt;/Fragment&gt;}  
函数组件：return &lt;Fragment&gt;xxxxxxx&lt;/Fragment&gt;
</code></pre><p>在最新的react版本中，也可以直接使用&lt;>&lt;/>来代替Fragment。其中&lt;>唯一可以拥有的属性为key。即&lt; key=&lsquo;xxx&rsquo;>&lt;/></p><p>3、使用数组map循环更新li，一定要给li添加对应的key值，否则虽然正常运行，但是会报错误警告。不建议直接使用index作为key值。</p><p>4、在最新的react版本中，为了提高更新性能，推荐采用异步的方式更新数据。具体使用方式为：setXxx((prevData) => {return xxx})。其中参数prevData指之前的变量值，return的对象指修改之后的数据值。</p><p>可以将上面代码简写为：setXxx(prevData => xxx)
若没有用到prevData参数，还可以省略，即 setXxx(() => xxx);</p><p>异步的目的是为了优化更新性能，react短期内发现多条数据变量发生修改，那么他会将所有修改合并成一次修改再最终执行。</p><p>5、在JSX中写注释，格式为：{/* xxxxx */}或{//xxxx}，注意如果使用单行注释，最外的大括号必须单独占一行。注释尽在开发源代码中显示，在导出的网页中不会有该注释。</p><p>6、给标签添加样式时，推荐使用className，不推荐使用class。如果使用class虽然运行没问题，但是会报错误警告，因为样式class这个关键词和js中声明类的class冲突。类似的还有标签中for关键词，推荐改为htmlFor。</p><p>7、通常情况下，react是针对组件开发，并且只负责对html中某一个div进行渲染，那么意味着该html其他标签不受影响，这样引申出来一个结果：一个html既可以使用react，也可以使用vue，两者可以并存。</p><p>8、为了方便调试代码，可以在谷歌浏览器中安装React Developer Tools插件。安装后可在谷歌浏览器调试模式下，查看component标签下的内容。 若访问本机react调试网页则该插件图标为红色、若访问导出版本的React网页则该插线显示为蓝色、若访问的网页没使用react框架则为灰色。</p><p>9、给组件设定属性，只有属性名没有属性值，那么默认react会将该属性值设置为true。在ES6中如果只有一个属性对象没有属性值，通常理解为该属性名和属性值是相同的。 为了避免混淆，不建议不给属性不设置属性值。</p><p>10、ReactDOM.createPortal()用来将元素渲染到任意DOM元素中(包括顶级组件之外的其他DOM中)。</p><h2 id=纯函数-概念解释>&ldquo;纯函数&rdquo; 概念解释
<a class=header-anchor href=#%e7%ba%af%e5%87%bd%e6%95%b0-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>JS中定义的所有函数都可以增加参数，所谓"纯函数"是指函数内部并未修改过该参数的函数。</p><p>例如以下函数：function myFun(a){let c=a }，该函数内部从未更改过参数a，那么这个函数就是纯函数。</p><p>反例，非纯函数 例如：function myFun(a){a=a+2; let c=a}，该函数内部修改过参数a，那么这个函数就不再是纯函数了。</p><p>纯函数的特殊意义是什么？<br>因为纯函数内部从不会直接修改参数，那么无论运行多少次，执行结果永远是一致的。</p><p>若仅仅有一个函数，那么也无所谓，但是如果有多个函数都是都需要调用执行同一个变量(参数)，为了确保多个函数执行结果是符合预期的，那么就要求每个函数都不能在自己内部修改该变量(参数)。</p><p>这就是为什么react不允许直接修改某变量的原因。</p><h2 id=受控组件-概念解释>&ldquo;受控组件&rdquo; 概念解释
<a class=header-anchor href=#%e5%8f%97%e6%8e%a7%e7%bb%84%e4%bb%b6-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>像input、select、textarea、form等将自身value与某变量进行绑定的组件，称之为受控组件。</p><p>&ldquo;受控"即这些组件的可以值受到某变量的控制。</p><p>与之对应的是"非受控组件&rdquo;，即该组件对应的值并不能被某变量控制。</p><p>例如"&lt;input type=&lsquo;file&rsquo;/>"，该组件的值为用户选中本地的文件信息，该值并不能直接通过某变量来进行value值的设定，因此该组件属于"非受控组件"。</p><h2 id=声明式开发-概念解释>&ldquo;声明式开发&rdquo; 概念解释
<a class=header-anchor href=#%e5%a3%b0%e6%98%8e%e5%bc%8f%e5%bc%80%e5%8f%91-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>&ldquo;声明式开发&rdquo;：基于数据定义和数据改变，视图层自动更新。<br>&ldquo;命令式开发&rdquo;：基于具体执行命令更改视图，例如DOM操作修改。</p><p>注意：声明式开发并不是不进行DOM操作，而是把DOM操作频率降到最低。</p><h2 id=单项数据流-概念解释>&ldquo;单项数据流&rdquo; 概念解释
<a class=header-anchor href=#%e5%8d%95%e9%a1%b9%e6%95%b0%e6%8d%ae%e6%b5%81-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>react框架的原则中规定，子组件只可以使用父组件传递过来的xxx属性对应的值或方法，不可以改变。</p><p>数据只能单向发生传递(父传向子，不允许子直接修改父)，若子组件想修改父组件中的数据，只能通过父组件暴露给子组件的函数(方法)来间接修改。</p><p>react框架具体实现方式是设置父组件传递给子组件的"数据值或方法"仅仅为可读，但不可修改。</p><p>为什么要做这样的限制？<br>因为一个父组件可以有多个子组件，如果每个子组件都可修改父组件中的数据(子组件之间彼此共用父组件的数据)，一个子组件的数据修改会造成其他子组件数据更改，最终会让整个组件数据变得非常复杂。</p><p>为了简化数据操作复杂程度，因此采用单向数据流策略，保证父组件数据的唯一最终可修改权归父组件所有。</p><h2 id=视图层渲染框架-概念解释>&ldquo;视图层渲染框架&rdquo; 概念解释
<a class=header-anchor href=#%e8%a7%86%e5%9b%be%e5%b1%82%e6%b8%b2%e6%9f%93%e6%a1%86%e6%9e%b6-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>react框架自身定位是"视图层渲染框架"，单向数据流概念很好，但是实际项目中页面会很复杂。</p><p>例如顶级组件Root中分别使用了组件A(由子组件A0、A1、A2构成)、组件B(由子组件A0、A1、A2构成)、组件C(由子组件C0、C1、C2构成)，若此时组件A的子组件A2想和组件C的子组件C1进行数据交互，那么按照单向数据流的规范，数据操作流程为 A2 -> A -> Root -> C - C1，可以看出操作流程非常复杂。</p><p>所以实际开发中，React框架也许会结合其他"数据层框架"(例如Redux、Flux等)，但是请注意，只从有了hook以后，可以通过useReducer+useContext来实现类似Redux的功能。</p><h2 id=函数式编程-概念解释>&ldquo;函数式编程&rdquo; 概念解释
<a class=header-anchor href=#%e5%87%bd%e6%95%b0%e5%bc%8f%e7%bc%96%e7%a8%8b-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>react自定义组件的各种交互都在内部定义不同的函数(js语法规定：类class中定义的函数不需要在前面写 function关键词)，因此成为函数式编程。不像原生JS和html交互那样，更多侧重html标签、DOM操作来实现视图和交互。</p><p>函数式编程的几点好处：<br>1、可以把复杂功能的处理函数拆分成多个细小的函数。<br>2、由于都是通过函数来进行视图层渲染和数据交互，更加方便编写"前端自动化测试"代码。</p><h2 id=虚拟dom-概念解释>&ldquo;虚拟DOM&rdquo; 概念解释
<a class=header-anchor href=#%e8%99%9a%e6%8b%9fdom-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>虚拟DOM(Virtual Dom)就是一个JS对象(数组对象)，用来描述真实DOM。相对通过html标签创建的真实DOM，虚拟DOM是保存在客户端内存里的一份JS表述DOM的数组对象。</p><p>用最简单的一个div标签来示意两者的差异，数据格式如下：</p><pre><code>//真实DOM数据格式(网页标签)
&lt;div id='mydiv'&gt;hell react&lt;/div&gt;

//虚拟DOM数据格式(JS数组对象)
//虚拟DOM数组对象格式为：标签名+属性集合+值
['div',{id:'mydiv'},'hell react']

//在JSX的创建模板代码中，通常代码格式为
render(){return &lt;div id='mydiv'&gt;hello react&lt;/&gt;}

//还可以使用react提供的，更加底层的方法来实现
render(){return React.createElement('div',{id:'mydiv'},'hello react')}
</code></pre><p>虚拟DOM更新性能快的原因并不是因为在内存中(理论上任何软件都是运行在内存中)，而是因为虚拟DOM储存的数据格式为JS对象，用JS来操作(生成/查询/对比/更新)JS对象很容易。用JS操作(生成/查询/对比/更新)真实DOM则需要调用Web Action层的API，性能相对就慢。</p><p>react运行(更新)步骤，大致为：<br>1、定义组件数据变量<br>2、定义组件模板JSX<br>3、数据与模板结合，生成一份虚拟DOM<br>4、将虚拟DOM转化为真实DOM<br>5、将得到的真实DOM挂载到html中(通过真实DOM操作)，用来显示<br>6、监听变量发生改变，若有改变重新执行第3步(数据与模板结合，生成另外一份新的虚拟DOM)<br>7、在内存中对比前后两份虚拟DOM，找出差异部分(diff算法)<br>8、将差异部分转化为真实的DOM<br>8、将差异化的真实DOM，通过真实DOM操作进行更新</p><p>当变量发生更改时，虚拟DOM减少了真实DOM的创建和对比次数(通过虚拟DOM而非真实DOM)，从而提高了性能。</p><h2 id=diff算法-概念解释>&ldquo;Diff算法&rdquo; 概念解释
<a class=header-anchor href=#diff%e7%ae%97%e6%b3%95-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>当变量发生改变时，需要重新生成新的虚拟DOM，并且对旧的虚拟DOM进行差异化比对。<br>Diff算法就是这个差异化比对的算法。</p><p>Diff算法为了提高性能，优化算法，通常原则为：</p><h5 id=同层同级虚拟dom比对>同层(同级)虚拟DOM比对
<a class=header-anchor href=#%e5%90%8c%e5%b1%82%e5%90%8c%e7%ba%a7%e8%99%9a%e6%8b%9fdom%e6%af%94%e5%af%b9></a></h5><p>先从两个虚拟DOM(JS对象)同层(即顶层)开始比对，如果发现同层就不一致，那么就直接放弃下一层(级别)的对比，采用最新的虚拟DOM。</p><p>疑问点：假如两心虚拟DOM顶层不一致，但下一级别以及后面的更多级别都一致，如果仅仅因为顶层不一致而就该放弃下一级别，重新操作真实DOM从头渲染，岂不是性能浪费？</p><p>答：同层(同级)虚拟DOM比对，&ldquo;比对"算法相对简单，比对速度快。如果采用多层(多级)比对，&ldquo;比对"算法会相对复杂，比对速度慢。 同层虚拟DOM比对就是利用了比对速度快的优势来抵消"操作真实DOM操作性能上的浪费&rdquo;。</p><h5 id=列表元素使用key值进行比对>列表元素使用key值进行比对
<a class=header-anchor href=#%e5%88%97%e8%a1%a8%e5%85%83%e7%b4%a0%e4%bd%bf%e7%94%a8key%e5%80%bc%e8%bf%9b%e8%a1%8c%e6%af%94%e5%af%b9></a></h5><p>这里的key值是值"稳定的key值(是有规律的字符串，非数字)"，若key值为索引数字index，那么顺序发生改变时，索引数字也会发生变化，无法判断之前的和现在的是否是同一个对象。</p><p>如果key值是稳定的，那么在比对的时候，比较容易比对出是否发生变化，以及具体的变化是什么。</p><p>Diff算法还有非常多的其他性能优化算法，以上列出的"同层比对、key值比对"仅仅为算法举例。</p><h2 id=高阶组件-概念解释>&ldquo;高阶组件&rdquo; 概念解释
<a class=header-anchor href=#%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>高阶组件是一种组件设计方式(设计模式)，就是将一个组件作为参数传递给一个函数，该函数接收参数(组件)后进行处理和装饰，并返回出一个新的组件。</p><p>简单来说就是，普通组件是根据参数(props)生成一个UI(JSX语法支持的标签)。而高阶组件是根据参数(组件)生成一个新的组件。</p><h2 id=生命周期函数-概念解释>&ldquo;生命周期函数&rdquo; 概念解释
<a class=header-anchor href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%87%bd%e6%95%b0-%e6%a6%82%e5%bf%b5%e8%a7%a3%e9%87%8a></a></h2><p>生命周期函数指在某一时刻组件会自动调用执行的函数。</p><p>这里的"某一时刻"可以是指组件初始化、挂载到虚拟DOM、数据更改引发的更新(重新渲染)、从虚拟DOM卸载这4个阶段。</p><h4 id=生命周期4个阶段和该阶段内的生命周期函数>生命周期4个阶段和该阶段内的生命周期函数：
<a class=header-anchor href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f4%e4%b8%aa%e9%98%b6%e6%ae%b5%e5%92%8c%e8%af%a5%e9%98%b6%e6%ae%b5%e5%86%85%e7%9a%84%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%87%bd%e6%95%b0></a></h4><h5 id=初始化initialization>初始化(Initialization)
<a class=header-anchor href=#%e5%88%9d%e5%a7%8b%e5%8c%96initialization></a></h5><p>constructor()是JS中原生类的构造函数，理论上他不专属于组件的初始化，但是如果把它归类成组件组初始化也是可以接受的。</p><h5 id=挂载mounting>挂载(Mounting)
<a class=header-anchor href=#%e6%8c%82%e8%bd%bdmounting></a></h5><p>componentWillMount(即将被挂载)、render(挂载)、componentDidMount(挂载完成)</p><h5 id=更新updation>更新(Updation)：
<a class=header-anchor href=#%e6%9b%b4%e6%96%b0updation></a></h5><p>props发生变化后对应的更新过程：componentWillReceiveProps(父组件发生数据更改，父组件的render重新被执行，子组件预测到可能会发生替换新数据)、shouldComponentUpdate(询问是否应该更新？返回true则更新、返回flash则不更新)、componentWillUpate(准备要开始更新)、render(更新)、componentDidUpdate(更新完成)</p><p>变量数据发生变化后对应的更新过程：shouldComponentUpdate(询问是否应该更新？返回true则更新、返回flash则不更新)、conponentWillUpdate(准备要开始更新)、、render(更新)、componentDidUpdate(更新完成)</p><p>props和states发生变化后的更新过程，唯一差异是props多了一个 componentWillReceiveProps生命周期函数。</p><p>componentWillReceiveProps触发的条件是：<br>1、一个组件要从父组件接收参数，并且已存在父组件中(子组件第一次被创建时是不会执行componentWillReceiveProps的)<br>2、只要父组件的render函数重新被执行(父组件发生数据更改，子组件预测到可能会发生替换新数据)，componentWillReceiveProps就会被触发</p><h5 id=捕获子组件错误>捕获子组件错误：
<a class=header-anchor href=#%e6%8d%95%e8%8e%b7%e5%ad%90%e7%bb%84%e4%bb%b6%e9%94%99%e8%af%af></a></h5><p>componentDidCatch(捕获到子组件错误时被触发)</p><h5 id=卸载unmounting>卸载(Unmounting)：
<a class=header-anchor href=#%e5%8d%b8%e8%bd%bdunmounting></a></h5><p>componentWillUnmount(即将被卸载)</p><p>备注：类组件继承自Component组件，Component组件内置了除render()以外的所有生命周期函数。因此自定义组件render()这个生命周期函数必须存在，其他的生命周期函数都可以忽略不写。 而使用了hook的函数组件，简化了生命周期函数调用的复杂程度。</p><h5 id=生命周期函数的几个应用场景>生命周期函数的几个应用场景：
<a class=header-anchor href=#%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f%e5%87%bd%e6%95%b0%e7%9a%84%e5%87%a0%e4%b8%aa%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af></a></h5><p>对于类组件(由class创建的)和函数组件(由function创建的)，他们对于生命周期的调用方法不同。</p><p>1、只需要第一次获取数据的Ajax请求<br>如果类组件有ajax请求(只需请求一次)，那么最好把ajax请求写在componentDidMount中(只执行一次)。因为"初始化、挂载、卸载"在一个组件的整个生命周期中只会发生一次，而"更新"可以在生命周期中多次执行。<br>如果是函数组件，则可以写在useEffect()中，并且将第2个参数设置为空数组，这样useEffect只会执行一次。</p><p>2、防止子组件不必要的重新渲染<br>如果是类组件，父组件发生变量改变，那么会调用render()，会重新渲染所有子组件。但是如果变量改变的某个值与某子组件并不相关，如果此时也重新渲染该子组件会造成性能上的浪费。为了解决这个情况，可以在子组件中的shouldComponentUpdate生命周期函数中，做以下操作:</p><pre><code>shouldComponentUpdate(nextProps,nextStates){
  //判断xxx值是否相同，如果相同则不进行重新渲染
  return (nextProps.xxx !== this.props.xxx); //注意是 !== 而不是 !=
}
</code></pre><p>还可以让组件继承由React.Component改为React.PureComponent，react会自动帮我们在shouldComponentUpdate生命周期函数中做浅对比。</p><p>如果是函数组件，则在子组件导出时，使用React.memo()进行包裹，同时结合useCallback来阻止无谓的渲染，实现提高性能。</p><h1 id=react中设置样式的几种形式>React中设置样式的几种形式
<a class=header-anchor href=#react%e4%b8%ad%e8%ae%be%e7%bd%ae%e6%a0%b7%e5%bc%8f%e7%9a%84%e5%87%a0%e7%a7%8d%e5%bd%a2%e5%bc%8f></a></h1><h5 id=第一种引用外部css样式>第一种：引用外部css样式
<a class=header-anchor href=#%e7%ac%ac%e4%b8%80%e7%a7%8d%e5%bc%95%e7%94%a8%e5%a4%96%e9%83%a8css%e6%a0%b7%e5%bc%8f></a></h5><p>伪代码示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./xxx.css&#39;</span>;  
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;xxx&#39;</span> <span style=color:#960050;background-color:#1e0010>/\</span>&gt;
</span></span></code></pre></div><p>注意：在jsx语法中，使用驼峰命名。例如原生html中的classname需要改成className、background-color要改成backgroundColor。</p><h5 id=第二种内部样式>第二种：内部样式
<a class=header-anchor href=#%e7%ac%ac%e4%ba%8c%e7%a7%8d%e5%86%85%e9%83%a8%e6%a0%b7%e5%bc%8f></a></h5><p>伪代码示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>return</span> &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>style</span><span style=color:#f92672>=</span>{{<span style=color:#a6e22e>backgroundColor</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;green&#39;</span>,<span style=color:#a6e22e>width</span><span style=color:#f92672>:</span><span style=color:#e6db74>&#39;100px&#39;</span>}} <span style=color:#960050;background-color:#1e0010>/\</span>&gt;  
</span></span></code></pre></div><p>注意：内联样式值为一个对象，对象属性之间用&rdquo;,&ldquo;分割而不是原生html中的&rdquo;;"。<br>因为是一个对象，因此下面代码也是可行的：<br>const mystyle = {backgroundColor:&lsquo;green&rsquo;,width:&lsquo;100px&rsquo;};
return &lt;div style={mystyle} /></p><h1 id=hook用法>Hook用法
<a class=header-anchor href=#hook%e7%94%a8%e6%b3%95></a></h1><p>Hook是react16.8以上版本才出现的新特性，可以在函数组件中使用组件生命周期函数，且颗粒度更加细致。</p><p>可以把Hook逻辑从组件中抽离出来，多个组件可以共享该hook逻辑。</p><p><strong>请注意hook本质上是为了解决组件之间共享逻辑，并不是单纯为了解决组件之间共享数据。</strong></p><p>hook表现出来特别像一个普通的JS函数(仅仅是表现出来但绝不是真的普通JS函数)。</p></div><footer class=post-footer><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/images/alipay.png alt="Allen - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/images/wechat.png alt="Allen - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
20 React基础知识</li><li class=post-copyright-author><strong>本文作者： </strong>Allen</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://chn.gg/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/ title="20 React基础知识">https://chn.gg/post/react/20.react%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i>
</span><span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i>
</span><span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/react/21.react%E6%89%A9%E5%B1%95%E9%98%85%E8%AF%BB/ rel=next title="21 React扩展阅读"><i class="fa fa-chevron-left"></i> 21 React扩展阅读</a></div><div class="post-nav-prev post-nav-item"><a href=/post/react/19.usetransition%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/ rel=prev title="19 useTransition基础用法">19 useTransition基础用法
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>Allen</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script><script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":"DIC_kwDOJhNIsM4CeQrC","emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"zhouzongyan/zhouzongyan.github.io","repoid":"R_kgDOJhNIsA","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://chn.gg/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o \n\n可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄\n(Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.0fb3547374c917d23a2e5f762b70f3698d20b46a01cc18c38f9c467aeffc99fc.js defer></script></body></html>